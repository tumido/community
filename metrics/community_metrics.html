
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Operate First Community Metrics &#8212; Operate First Community</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/icon.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Operate First Community</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Operate First community planning repository
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../glossary.html">
   Operate First Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../governance.html">
   Operate First Community Governance 1.0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../open-source-services.html">
   Minimum Open Source Requirements for Services
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SIGs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../sig-list.html">
   Special Interest Groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../liaisons.html">
   Liaisons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sig-community/charter.html">
   SIG Community
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sig-operations/charter.html">
   SIG Operations
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/operate-first/community/main?urlpath=tree/./metrics/community_metrics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/operate-first/community"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/operate-first/community/issues/new?title=Issue%20on%20page%20%2Fmetrics/community_metrics.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/metrics/community_metrics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Operate First Community Metrics
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#connect-to-augur-database">
   Connect to Augur Database
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieve-available-respositories">
     Retrieve Available Respositories
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributors">
   Contributors
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#internal-vs-external-contributors">
     Internal vs External Contributors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#issues">
   Issues
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#issues-created-over-time">
     Issues Created Over Time
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#issues-created-by-external-vs-internal-contributors">
       Issues Created by External vs Internal Contributors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prs">
   PRs
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prs-created-over-time">
     PRs Created Over Time
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prs-created-by-external-vs-internal-contributors">
     PRs Created By External vs Internal Contributors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Operate First Community Metrics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Operate First Community Metrics
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#connect-to-augur-database">
   Connect to Augur Database
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieve-available-respositories">
     Retrieve Available Respositories
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributors">
   Contributors
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#internal-vs-external-contributors">
     Internal vs External Contributors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#issues">
   Issues
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#issues-created-over-time">
     Issues Created Over Time
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#issues-created-by-external-vs-internal-contributors">
       Issues Created by External vs Internal Contributors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prs">
   PRs
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prs-created-over-time">
     PRs Created Over Time
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prs-created-by-external-vs-internal-contributors">
     PRs Created By External vs Internal Contributors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="operate-first-community-metrics">
<h1>Operate First Community Metrics<a class="headerlink" href="#operate-first-community-metrics" title="Permalink to this headline">#</a></h1>
<p>In this notebook, we would like to analyze the Operate First Community by collecting and visualizing GitHub metrics from <a class="reference external" href="https://github.com/chaoss/augur">Augur</a>. Augur is a software suite for collecting and measuring structured data about free and open-source software (FOSS) communities. It gathers trace data for a group of repositories or a GitHub organization, normalizes it into a data model, and provides a variety of metrics about the said data.</p>
<p>Some of the metrics we would like to focus in this notebook are:</p>
<ol class="simple">
<li><p><strong>Community Vitality (Size &amp; Growth)</strong> - All the metrics that can be used to measure both the size and growth of the community such as number of users, number of contributors, number of projects deployed on Operate First, how many new users do we onboard every month, number of issues submitted over time, number of PRs merged over time etc</p></li>
<li><p><strong>Impact</strong> - Metrics that can be used to understand the impact made by the Operate First community such as how many upstream issues were opened, upstream contributions etc</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import required packages</span>
<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 
<span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">salc</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">)})</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config_temp.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="connect-to-augur-database">
<h1>Connect to Augur Database<a class="headerlink" href="#connect-to-augur-database" title="Permalink to this headline">#</a></h1>
<p>We will need to connect to the Augur database which has been configured to fetch the Operate First GitHub data. The database configurations need to be specified in the <code class="docutils literal notranslate"><span class="pre">config.json</span></code> file. The database schema we will be using is the <code class="docutils literal notranslate"><span class="pre">augur_data</span></code> schema. You can learn more about the schema here: <a class="reference external" href="https://github.com/sandiego-rh/sandiego/blob/master/schema.png">https://github.com/sandiego-rh/sandiego/blob/master/schema.png</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">database_connection_string</span> <span class="o">=</span> <span class="s1">&#39;postgresql+psycopg2://</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">@</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;port&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">])</span>

<span class="n">dbschema</span><span class="o">=</span><span class="s1">&#39;augur_data&#39;</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">create_engine</span><span class="p">(</span>
    <span class="n">database_connection_string</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="s1">&#39;-csearch_path=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dbschema</span><span class="p">)})</span>
</pre></div>
</div>
</div>
</div>
<section id="retrieve-available-respositories">
<h2>Retrieve Available Respositories<a class="headerlink" href="#retrieve-available-respositories" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">repolist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">repo_query</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">             SET SCHEMA &#39;augur_data&#39;;</span>
<span class="s2">             SELECT a.rg_name,</span>
<span class="s2">                a.repo_group_id,</span>
<span class="s2">                b.repo_name,</span>
<span class="s2">                b.repo_id,</span>
<span class="s2">                b.forked_from,</span>
<span class="s2">                b.repo_archived,</span>
<span class="s2">                b.repo_git</span>
<span class="s2">            FROM</span>
<span class="s2">                repo_groups a,</span>
<span class="s2">                repo b</span>
<span class="s2">            WHERE</span>
<span class="s2">                a.repo_group_id = b.repo_group_id</span>
<span class="s2">            ORDER BY</span>
<span class="s2">                rg_name,</span>
<span class="s2">                repo_name;</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">repolist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">repo_query</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">repolist</span><span class="p">)</span>
<span class="n">repolist</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rg_name</th>
      <th>repo_group_id</th>
      <th>repo_name</th>
      <th>repo_id</th>
      <th>forked_from</th>
      <th>repo_archived</th>
      <th>repo_git</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>alertmanager-github-receiver</td>
      <td>25434</td>
      <td>m-lab/alertmanager-github-receiver</td>
      <td>0</td>
      <td>https://github.com/operate-first/alertmanager-...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>alerts</td>
      <td>25431</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/alerts</td>
    </tr>
    <tr>
      <th>2</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>apps</td>
      <td>25450</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/apps</td>
    </tr>
    <tr>
      <th>3</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>argocd-apps</td>
      <td>25454</td>
      <td>Parent not available</td>
      <td>1</td>
      <td>https://github.com/operate-first/argocd-apps</td>
    </tr>
    <tr>
      <th>4</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>blueprint</td>
      <td>25442</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/blueprint</td>
    </tr>
    <tr>
      <th>5</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>common</td>
      <td>25436</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/common</td>
    </tr>
    <tr>
      <th>6</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>community</td>
      <td>25430</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/community</td>
    </tr>
    <tr>
      <th>7</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>community-handbook</td>
      <td>25455</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/community-han...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>continuous-delivery</td>
      <td>25445</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/continuous-de...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>continuous-deployment</td>
      <td>25453</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/continuous-de...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>curator</td>
      <td>25443</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/curator</td>
    </tr>
    <tr>
      <th>11</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>espresso-series</td>
      <td>25444</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/espresso-series</td>
    </tr>
    <tr>
      <th>12</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>example-acm-install</td>
      <td>25440</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/example-acm-i...</td>
    </tr>
    <tr>
      <th>13</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>hetzner-baremetal-openshift</td>
      <td>25451</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/hetzner-barem...</td>
    </tr>
    <tr>
      <th>14</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>hitchhikers-guide</td>
      <td>25452</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/hitchhikers-g...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>installplan-operator</td>
      <td>25432</td>
      <td>Parent not available</td>
      <td>1</td>
      <td>https://github.com/operate-first/installplan-o...</td>
    </tr>
    <tr>
      <th>16</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>odh-dashboard</td>
      <td>25447</td>
      <td>opendatahub-io/odh-dashboard</td>
      <td>0</td>
      <td>https://github.com/operate-first/odh-dashboard</td>
    </tr>
    <tr>
      <th>17</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>operate-first</td>
      <td>25433</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/operate-first...</td>
    </tr>
    <tr>
      <th>18</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>operate-first-twitter</td>
      <td>25441</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/operate-first...</td>
    </tr>
    <tr>
      <th>19</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>opfcli</td>
      <td>25449</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/opfcli</td>
    </tr>
    <tr>
      <th>20</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>SRE</td>
      <td>25437</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/SRE</td>
    </tr>
    <tr>
      <th>21</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>sre-apprenticeship</td>
      <td>25438</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/sre-apprentic...</td>
    </tr>
    <tr>
      <th>22</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>support</td>
      <td>25448</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/support</td>
    </tr>
    <tr>
      <th>23</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>template</td>
      <td>25439</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/template</td>
    </tr>
    <tr>
      <th>24</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>toolbox</td>
      <td>25435</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/toolbox</td>
    </tr>
    <tr>
      <th>25</th>
      <td>operate-first</td>
      <td>25155</td>
      <td>workshop-apps</td>
      <td>25446</td>
      <td>Parent not available</td>
      <td>0</td>
      <td>https://github.com/operate-first/workshop-apps</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>rg_name          object
repo_group_id     int64
repo_name        object
repo_id           int64
forked_from      object
repo_archived     int64
repo_git         object
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make Operate First repo lists to filter for following sql queries</span>
<span class="n">repo_id_name</span> <span class="o">=</span> <span class="n">repolist</span><span class="p">[</span><span class="n">repolist</span><span class="p">[</span><span class="s1">&#39;rg_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;operate-first&quot;</span><span class="p">][[</span><span class="s1">&#39;repo_id&#39;</span><span class="p">,</span> <span class="s1">&#39;repo_git&#39;</span><span class="p">]]</span>
<span class="n">repo_id_list</span> <span class="o">=</span> <span class="n">repo_id_name</span><span class="p">[</span><span class="s1">&#39;repo_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of repositories in Operate First Organization:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">repo_id_list</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of repositories in Operate First Organization: 26
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">repolist_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;repo_id&#39;</span><span class="p">,</span> <span class="s1">&#39;repo_name&#39;</span><span class="p">]</span>
<span class="n">repolist</span> <span class="o">=</span> <span class="n">repolist</span><span class="p">[</span><span class="n">repolist_columns</span><span class="p">]</span>
<span class="n">repolist</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>repo_id</th>
      <th>repo_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25434</td>
      <td>alertmanager-github-receiver</td>
    </tr>
    <tr>
      <th>1</th>
      <td>25431</td>
      <td>alerts</td>
    </tr>
    <tr>
      <th>2</th>
      <td>25450</td>
      <td>apps</td>
    </tr>
    <tr>
      <th>3</th>
      <td>25454</td>
      <td>argocd-apps</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25442</td>
      <td>blueprint</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now that we have each of the Operate First repositories and their associated repository IDs, we can start fetching the different types of metrics and analyzing them by categories such as Contributors, Issues and PRs.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="contributors">
<h1>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">#</a></h1>
<p>In order to measure the size and growth of the Operate First community, we can look at our contributor population base and identify the trend in the growth of our community. We can also further distinguish between “internal” and “external” contributors.</p>
<ol class="simple">
<li><p>Internal Contributors - Core contributors part of the Operate First team</p></li>
<li><p>External Contributors - All contributors outside of the Operare First team</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Identify the list of internal contributors</span>
<span class="n">internal_contributors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Aakanksha Duggal&#39;</span><span class="p">,</span><span class="s1">&#39;Alice Saparov&#39;</span><span class="p">,</span><span class="s1">&#39;Anand Sanmukhani&#39;</span><span class="p">,</span><span class="s1">&#39;Bill Burns&#39;</span><span class="p">,</span><span class="s1">&#39;Christoph Görn&#39;</span><span class="p">,</span><span class="s1">&#39;Francesco Murdaca&#39;</span><span class="p">,</span><span class="s1">&#39;Fridolín Pokorný&#39;</span><span class="p">,</span><span class="s1">&#39;Gagan Kumar&#39;</span><span class="p">,</span><span class="s1">&#39;Harshad Reddy Nalla&#39;</span><span class="p">,</span><span class="s1">&#39;Heidi Picher Dempsey&#39;</span><span class="p">,</span><span class="s1">&#39;Hema Veeradhi&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Humair&#39;</span><span class="p">,</span><span class="s1">&#39;Isabel Zimmerman&#39;</span><span class="p">,</span><span class="s1">&#39;Karanraj Chauhan&#39;</span><span class="p">,</span><span class="s1">&#39;Karsten Wade&#39;</span><span class="p">,</span><span class="s1">&#39;Lars Kellogg-Stedman&#39;</span><span class="p">,</span><span class="s1">&#39;LeihaoChen&#39;</span><span class="p">,</span><span class="s1">&#39;Marcel Hild&#39;</span><span class="p">,</span><span class="s1">&#39;Margaret Haley&#39;</span><span class="p">,</span><span class="s1">&#39;Michael Clifford&#39;</span><span class="p">,</span><span class="s1">&#39;Michal Drla&#39;</span><span class="p">,</span><span class="s1">&#39;Oindrilla Chatterjee&#39;</span><span class="p">,</span><span class="s1">&#39;Operate First&#39;</span><span class="p">,</span><span class="s1">&#39;Shrey&#39;</span><span class="p">,</span><span class="s1">&#39;Surbhi Kanthed&#39;</span><span class="p">,</span><span class="s1">&#39;Surya Prakash Pathak&#39;</span><span class="p">,</span><span class="s1">&#39;Thoth Bot&#39;</span><span class="p">,</span><span class="s1">&#39;Tom Coufal&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Now, we will fetch the data from the <code class="docutils literal notranslate"><span class="pre">contributors</span></code> table which contains information pertaining to the contributors such as their names, GitHub ID, contributor ID etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">contributors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="n">repo_query</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">             SET SCHEMA &#39;augur_data&#39;;</span>
<span class="s2">             SELECT * FROM contributors</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">contributors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">repo_query</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retain only relevant columns of interest</span>
<span class="n">contributors_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cntrb_id&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrb_full_name&#39;</span><span class="p">,</span> <span class="s1">&#39;gh_user_id&#39;</span><span class="p">]</span>
<span class="n">contributors</span> <span class="o">=</span> <span class="n">contributors</span><span class="p">[</span><span class="n">contributors_columns</span><span class="p">]</span>
<span class="c1"># Add another column to identify whether a user is an internal or external contributor</span>
<span class="n">contributors</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contributors</span><span class="p">[</span><span class="s1">&#39;cntrb_full_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">internal_contributors</span><span class="p">)</span>
<span class="c1">#contributors = contributors.dropna()</span>
<span class="n">contributors</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cntrb_id</th>
      <th>cntrb_full_name</th>
      <th>gh_user_id</th>
      <th>cntrb_internal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>None</td>
      <td>1</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>277128</td>
      <td>Hema Veeradhi</td>
      <td>7343099</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>277109</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>277117</td>
      <td>Christoph Görn</td>
      <td>260331</td>
      <td>True</td>
    </tr>
    <tr>
      <th>4</th>
      <td>277114</td>
      <td>Harshad Reddy Nalla</td>
      <td>14028058</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>255</th>
      <td>277590</td>
      <td>Gerrod Thomas</td>
      <td>865932</td>
      <td>False</td>
    </tr>
    <tr>
      <th>256</th>
      <td>277156</td>
      <td>Gagan Kumar</td>
      <td>47332731</td>
      <td>True</td>
    </tr>
    <tr>
      <th>257</th>
      <td>277535</td>
      <td>Yaniv Kaul</td>
      <td>4655593</td>
      <td>False</td>
    </tr>
    <tr>
      <th>258</th>
      <td>277565</td>
      <td>None</td>
      <td>49317403</td>
      <td>False</td>
    </tr>
    <tr>
      <th>259</th>
      <td>277591</td>
      <td>None</td>
      <td>538676</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>260 rows × 4 columns</p>
</div></div></div>
</div>
<section id="internal-vs-external-contributors">
<h2>Internal vs External Contributors<a class="headerlink" href="#internal-vs-external-contributors" title="Permalink to this headline">#</a></h2>
<p>Let’s see the distribution of internal vs external contributors</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">contributors</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False    232
True      28
Name: cntrb_internal, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cntrb_groups</span> <span class="o">=</span> <span class="n">contributors</span><span class="p">[</span><span class="s1">&#39;gh_user_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">contributors</span><span class="o">.</span><span class="n">cntrb_internal</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;External&quot;</span><span class="p">,</span><span class="s2">&quot;Internal&quot;</span><span class="p">]</span>
<span class="n">cntrb_groups</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Internal vs External Contributors&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_17_0.png" src="../_images/community_metrics_17_0.png" />
</div>
</div>
<p>We have 108 (80.6%) external contributors and 26 (19.4%) internal contributors.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="issues">
<h1>Issues<a class="headerlink" href="#issues" title="Permalink to this headline">#</a></h1>
<p>We can also measure the size and growth of the community by analyzing the GitHub repository activities (issues and PRs) by tracking the GitHub issue activity across repositories such as number of issues created over time, number of issues closed over time, number of issues created by internal vs external contributors etc.</p>
<p>We will fetch the data from the <code class="docutils literal notranslate"><span class="pre">issues</span></code> table which contains information pertaining to the issue activity across repositories such as issue creation time, issue closed time, repository ID, GitHub user ID etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">START_DATE</span> <span class="o">=</span> <span class="s1">&#39;2020-01-01&#39;</span>
<span class="n">END_DATE</span> <span class="o">=</span> <span class="s1">&#39;2021-12-31&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="n">repo_query</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">             SET SCHEMA &#39;augur_data&#39;;</span>
<span class="s2">             SELECT * FROM issues</span>
<span class="s2">             WHERE repo_id IN </span><span class="si">{</span><span class="nb">tuple</span><span class="p">(</span><span class="n">repo_id_list</span><span class="p">)</span><span class="si">}</span><span class="s2"></span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">issues</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">repo_query</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">issues</span> <span class="o">=</span> <span class="n">issues</span><span class="p">[(</span><span class="n">issues</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">START_DATE</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">issues</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">END_DATE</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retain only relvant columns of interest</span>
<span class="n">issues_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;issue_id&#39;</span><span class="p">,</span> <span class="s1">&#39;repo_id&#39;</span><span class="p">,</span> <span class="s1">&#39;gh_user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;closed_at&#39;</span><span class="p">]</span>
<span class="n">issues</span> <span class="o">=</span> <span class="n">issues</span><span class="p">[</span><span class="n">issues_columns</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Join repository details</span>
<span class="n">issues_repo</span> <span class="o">=</span> <span class="n">issues</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;repo_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repolist</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;repo_id&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Join contributor details</span>
<span class="n">issues_repo_cont</span> <span class="o">=</span> <span class="n">issues_repo</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;gh_user_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">contributors</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;gh_user_id&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_cont</span> <span class="o">=</span> <span class="n">issues_repo_cont</span><span class="p">[</span><span class="n">issues_repo_cont</span><span class="p">[</span><span class="s1">&#39;repo_name&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;alerts&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_cont</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gh_user_id</th>
      <th>repo_id</th>
      <th>issue_id</th>
      <th>created_at</th>
      <th>closed_at</th>
      <th>repo_name</th>
      <th>cntrb_id</th>
      <th>cntrb_full_name</th>
      <th>cntrb_internal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>36604</td>
      <td>25437</td>
      <td>352816</td>
      <td>2021-08-12 12:47:52</td>
      <td>NaT</td>
      <td>SRE</td>
      <td>277150</td>
      <td>Robert Bohne</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>36604</td>
      <td>25448</td>
      <td>353554</td>
      <td>2021-08-08 09:28:31</td>
      <td>NaT</td>
      <td>support</td>
      <td>277150</td>
      <td>Robert Bohne</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>36604</td>
      <td>25448</td>
      <td>353557</td>
      <td>2021-08-08 09:18:32</td>
      <td>NaT</td>
      <td>support</td>
      <td>277150</td>
      <td>Robert Bohne</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3</th>
      <td>36604</td>
      <td>25448</td>
      <td>353588</td>
      <td>2021-07-14 13:20:59</td>
      <td>NaT</td>
      <td>support</td>
      <td>277150</td>
      <td>Robert Bohne</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>36604</td>
      <td>25448</td>
      <td>353550</td>
      <td>2021-08-08 10:16:17</td>
      <td>2022-01-07 18:22:07</td>
      <td>support</td>
      <td>277150</td>
      <td>Robert Bohne</td>
      <td>False</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>29561</th>
      <td>89909507</td>
      <td>25450</td>
      <td>366550</td>
      <td>2021-10-25 13:55:02</td>
      <td>2021-11-19 18:35:27</td>
      <td>apps</td>
      <td>277250</td>
      <td>Thor*sten Schwesig</td>
      <td>False</td>
    </tr>
    <tr>
      <th>29562</th>
      <td>89909507</td>
      <td>25450</td>
      <td>366390</td>
      <td>2021-11-29 20:45:17</td>
      <td>2021-11-29 22:28:48</td>
      <td>apps</td>
      <td>277250</td>
      <td>Thor*sten Schwesig</td>
      <td>False</td>
    </tr>
    <tr>
      <th>29563</th>
      <td>89909507</td>
      <td>25450</td>
      <td>366551</td>
      <td>2021-10-25 13:53:16</td>
      <td>2021-11-02 16:54:12</td>
      <td>apps</td>
      <td>277250</td>
      <td>Thor*sten Schwesig</td>
      <td>False</td>
    </tr>
    <tr>
      <th>29564</th>
      <td>89909507</td>
      <td>25452</td>
      <td>366847</td>
      <td>2021-12-08 13:13:10</td>
      <td>2021-12-09 17:59:19</td>
      <td>hitchhikers-guide</td>
      <td>277250</td>
      <td>Thor*sten Schwesig</td>
      <td>False</td>
    </tr>
    <tr>
      <th>29565</th>
      <td>89909507</td>
      <td>25452</td>
      <td>366865</td>
      <td>2021-09-29 06:34:17</td>
      <td>2021-11-12 21:58:07</td>
      <td>hitchhikers-guide</td>
      <td>277250</td>
      <td>Thor*sten Schwesig</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>3975 rows × 9 columns</p>
</div></div></div>
</div>
<section id="issues-created-over-time">
<h2>Issues Created Over Time<a class="headerlink" href="#issues-created-over-time" title="Permalink to this headline">#</a></h2>
<p>Lets visualize the number of issues created over time per repository.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_cont</span><span class="p">[[</span><span class="s1">&#39;repo_name&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;issue_id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;repo_name&#39;</span><span class="p">,</span> <span class="s1">&#39;created_at&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Repository,Day&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;# Issues&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;# Issues Created Over Time per Repository&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_29_0.png" src="../_images/community_metrics_29_0.png" />
</div>
</div>
<p>Now let’s try to visualize the number of monthly issues that were created across all repositories.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_time</span> <span class="o">=</span> <span class="n">issues_repo_cont</span><span class="p">[</span><span class="s1">&#39;repo_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">issues_repo_cont</span><span class="o">.</span><span class="n">created_at</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">issues_repo_time</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2020-08-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2022-01-31&#39;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Number of Issues Created Over Time&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Month&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Count&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_32_0.png" src="../_images/community_metrics_32_0.png" />
</div>
</div>
<p>We see that over the year (2020-2021), we had an increase in the number of issues being created indicating an active community.</p>
<p>Now lets see the number of issues being created per repository.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_gb</span> <span class="o">=</span> <span class="n">issues_repo_cont</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;repo_name&#39;</span><span class="p">)</span>
<span class="n">issues_repo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">issues_repo</span><span class="p">[</span><span class="s1">&#39;internal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issues_repo_gb</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">issues_repo</span><span class="p">[</span><span class="s1">&#39;external&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issues_repo_gb</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;internal&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="s1">&#39;True&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Number of Issues Created (Grouped by Repository)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Repository&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Count&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_36_0.png" src="../_images/community_metrics_36_0.png" />
</div>
</div>
<p>We see that the <code class="docutils literal notranslate"><span class="pre">alerts</span></code> repo has the highest number of issues being created. The <code class="docutils literal notranslate"><span class="pre">SRE,</span> <span class="pre">apps,</span> <span class="pre">support</span> <span class="pre">and</span> <span class="pre">operate-first</span></code> repositories are other repositories which are active.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issues_repo_gb</span><span class="o">.</span><span class="n">gh_user_id</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Issues Created Across Repositories&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_38_0.png" src="../_images/community_metrics_38_0.png" />
</div>
</div>
<p>We see that 85% of issues are being created in the <code class="docutils literal notranslate"><span class="pre">alerts</span></code> repository.</p>
<section id="issues-created-by-external-vs-internal-contributors">
<h3>Issues Created by External vs Internal Contributors<a class="headerlink" href="#issues-created-by-external-vs-internal-contributors" title="Permalink to this headline">#</a></h3>
<p>Let’s see the distribution of issues opened by External and Internal contributors</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issue_cntrb</span> <span class="o">=</span> <span class="n">issues_repo_cont</span><span class="p">[</span><span class="s1">&#39;issue_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">issues_repo_cont</span><span class="o">.</span><span class="n">cntrb_internal</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;External&quot;</span><span class="p">,</span><span class="s2">&quot;Internal&quot;</span><span class="p">]</span>
<span class="n">issue_cntrb</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Issues Opened by External vs Internal Contributors&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_42_0.png" src="../_images/community_metrics_42_0.png" />
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="prs">
<h1>PRs<a class="headerlink" href="#prs" title="Permalink to this headline">#</a></h1>
<p>We can also measure the size and growth of the community by analyzing the GitHub repository activities (issues and PRs) by tracking the GitHub PR activity across repositories such as number of PRs created over time, number of PRs closed over time, number of PRs created by internal vs external contributors etc.</p>
<p>We will fetch the data from the <code class="docutils literal notranslate"><span class="pre">pull_requests</span></code> and <code class="docutils literal notranslate"><span class="pre">pull_request_meta</span></code> tables which contains information pertaining to the PR activity across repositories such as PR creation time, PR closed time, repository ID, PR ID etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="n">repo_query</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">             SET SCHEMA &#39;augur_data&#39;;</span>
<span class="s2">             SELECT * FROM pull_requests</span>
<span class="s2">             WHERE repo_id IN </span><span class="si">{</span><span class="nb">tuple</span><span class="p">(</span><span class="n">repo_id_list</span><span class="p">)</span><span class="si">}</span><span class="s2"></span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">pr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">repo_query</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">pr</span> <span class="o">=</span> <span class="n">pr</span><span class="p">[(</span><span class="n">pr</span><span class="p">[</span><span class="s1">&#39;pr_created_at&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">START_DATE</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pr</span><span class="p">[</span><span class="s1">&#39;pr_created_at&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">END_DATE</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_meta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="n">repo_query</span> <span class="o">=</span> <span class="n">salc</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">             SET SCHEMA &#39;augur_data&#39;;</span>
<span class="s2">             SELECT * FROM pull_request_meta</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">pr_meta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">repo_query</span><span class="p">,</span> <span class="n">con</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retain relevant columns</span>
<span class="n">pr_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">,</span> <span class="s1">&#39;pr_created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;pr_closed_at&#39;</span><span class="p">,</span> <span class="s1">&#39;pr_merged_at&#39;</span><span class="p">,</span> <span class="s1">&#39;repo_id&#39;</span><span class="p">]</span>
<span class="n">pr</span> <span class="o">=</span> <span class="n">pr</span><span class="p">[</span><span class="n">pr_columns</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_meta_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrb_id&#39;</span><span class="p">]</span>
<span class="n">pr_meta</span> <span class="o">=</span> <span class="n">pr_meta</span><span class="p">[</span><span class="n">pr_meta_columns</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Join repository details</span>
<span class="n">pr_repo</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;repo_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repolist</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;repo_id&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Join contributor id</span>
<span class="n">pr_repo_cid</span> <span class="o">=</span> <span class="n">pr_repo</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pr_meta</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Join contributor details</span>
<span class="n">pr_repo_cid_cont</span> <span class="o">=</span> <span class="n">pr_repo_cid</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;cntrb_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">contributors</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;cntrb_id&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_repo_cid_cont</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cntrb_id</th>
      <th>pull_request_id</th>
      <th>repo_id</th>
      <th>pr_created_at</th>
      <th>pr_closed_at</th>
      <th>pr_merged_at</th>
      <th>repo_name</th>
      <th>cntrb_full_name</th>
      <th>gh_user_id</th>
      <th>cntrb_internal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>277109</td>
      <td>209022</td>
      <td>25431</td>
      <td>2021-03-17 15:31:10</td>
      <td>2021-03-17 15:58:04</td>
      <td>2021-03-17 15:58:04</td>
      <td>alerts</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>277109</td>
      <td>209023</td>
      <td>25431</td>
      <td>2021-05-03 12:42:07</td>
      <td>2021-05-03 13:30:33</td>
      <td>2021-05-03 13:30:33</td>
      <td>alerts</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>277109</td>
      <td>209025</td>
      <td>25430</td>
      <td>2021-05-12 08:59:18</td>
      <td>2021-05-12 13:37:14</td>
      <td>2021-05-12 13:37:14</td>
      <td>community</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>277109</td>
      <td>209035</td>
      <td>25432</td>
      <td>2021-03-22 11:07:03</td>
      <td>2021-03-22 12:49:55</td>
      <td>2021-03-22 12:49:55</td>
      <td>installplan-operator</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>4</th>
      <td>277109</td>
      <td>209036</td>
      <td>25432</td>
      <td>2021-03-29 09:15:43</td>
      <td>2021-04-09 13:38:48</td>
      <td>2021-04-09 13:38:48</td>
      <td>installplan-operator</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3418</th>
      <td>277250</td>
      <td>210592</td>
      <td>25441</td>
      <td>2021-10-11 15:05:33</td>
      <td>2021-10-12 09:19:11</td>
      <td>2021-10-12 09:19:11</td>
      <td>operate-first-twitter</td>
      <td>Thor*sten Schwesig</td>
      <td>89909507</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3419</th>
      <td>277250</td>
      <td>210624</td>
      <td>25448</td>
      <td>2021-10-15 12:27:01</td>
      <td>2021-10-21 14:11:11</td>
      <td>2021-10-21 14:11:11</td>
      <td>support</td>
      <td>Thor*sten Schwesig</td>
      <td>89909507</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3420</th>
      <td>277258</td>
      <td>210718</td>
      <td>25445</td>
      <td>2021-12-08 16:42:11</td>
      <td>2022-01-11 14:49:29</td>
      <td>2022-01-11 14:49:29</td>
      <td>continuous-delivery</td>
      <td>Ryan Cook</td>
      <td>3812500</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3421</th>
      <td>277281</td>
      <td>210577</td>
      <td>25437</td>
      <td>2021-10-26 13:38:28</td>
      <td>2021-10-26 16:43:38</td>
      <td>2021-10-26 16:43:38</td>
      <td>SRE</td>
      <td>axel simon</td>
      <td>1172256</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3422</th>
      <td>277284</td>
      <td>210598</td>
      <td>25446</td>
      <td>2021-09-02 16:50:05</td>
      <td>2021-09-02 16:58:16</td>
      <td>2021-09-02 16:58:16</td>
      <td>workshop-apps</td>
      <td>Diego Uchôa Neves</td>
      <td>13623671</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>3423 rows × 10 columns</p>
</div></div></div>
</div>
<section id="prs-created-over-time">
<h2>PRs Created Over Time<a class="headerlink" href="#prs-created-over-time" title="Permalink to this headline">#</a></h2>
<p>Lets visualize the number of PRs created over time per repository.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_repo_cid_cont</span><span class="p">[[</span><span class="s1">&#39;repo_name&#39;</span><span class="p">,</span> <span class="s1">&#39;pr_created_at&#39;</span><span class="p">,</span> <span class="s1">&#39;pull_request_id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;repo_name&#39;</span><span class="p">,</span> <span class="s1">&#39;pr_created_at&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Repository,Day&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;# PRs&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;# PRs Created Over Time per Repository&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_54_0.png" src="../_images/community_metrics_54_0.png" />
</div>
</div>
<p>Let’s try to visualize the number of monthly PRs that were created across all repositories.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prs_repo_time</span> <span class="o">=</span> <span class="n">pr_repo_cid_cont</span><span class="p">[</span><span class="s1">&#39;repo_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">pr_repo_cid_cont</span><span class="o">.</span><span class="n">pr_created_at</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">prs_repo_time</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2020-08-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2022-01-31&#39;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Number of PRs Created Over Time&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Month&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Count&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_57_0.png" src="../_images/community_metrics_57_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_repo_cid_cont</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cntrb_id</th>
      <th>pull_request_id</th>
      <th>repo_id</th>
      <th>pr_created_at</th>
      <th>pr_closed_at</th>
      <th>pr_merged_at</th>
      <th>repo_name</th>
      <th>cntrb_full_name</th>
      <th>gh_user_id</th>
      <th>cntrb_internal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>277109</td>
      <td>209022</td>
      <td>25431</td>
      <td>2021-03-17 15:31:10</td>
      <td>2021-03-17 15:58:04</td>
      <td>2021-03-17 15:58:04</td>
      <td>alerts</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>277109</td>
      <td>209023</td>
      <td>25431</td>
      <td>2021-05-03 12:42:07</td>
      <td>2021-05-03 13:30:33</td>
      <td>2021-05-03 13:30:33</td>
      <td>alerts</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>277109</td>
      <td>209025</td>
      <td>25430</td>
      <td>2021-05-12 08:59:18</td>
      <td>2021-05-12 13:37:14</td>
      <td>2021-05-12 13:37:14</td>
      <td>community</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>277109</td>
      <td>209035</td>
      <td>25432</td>
      <td>2021-03-22 11:07:03</td>
      <td>2021-03-22 12:49:55</td>
      <td>2021-03-22 12:49:55</td>
      <td>installplan-operator</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>4</th>
      <td>277109</td>
      <td>209036</td>
      <td>25432</td>
      <td>2021-03-29 09:15:43</td>
      <td>2021-04-09 13:38:48</td>
      <td>2021-04-09 13:38:48</td>
      <td>installplan-operator</td>
      <td>Tom Coufal</td>
      <td>7453394</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3418</th>
      <td>277250</td>
      <td>210592</td>
      <td>25441</td>
      <td>2021-10-11 15:05:33</td>
      <td>2021-10-12 09:19:11</td>
      <td>2021-10-12 09:19:11</td>
      <td>operate-first-twitter</td>
      <td>Thor*sten Schwesig</td>
      <td>89909507</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3419</th>
      <td>277250</td>
      <td>210624</td>
      <td>25448</td>
      <td>2021-10-15 12:27:01</td>
      <td>2021-10-21 14:11:11</td>
      <td>2021-10-21 14:11:11</td>
      <td>support</td>
      <td>Thor*sten Schwesig</td>
      <td>89909507</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3420</th>
      <td>277258</td>
      <td>210718</td>
      <td>25445</td>
      <td>2021-12-08 16:42:11</td>
      <td>2022-01-11 14:49:29</td>
      <td>2022-01-11 14:49:29</td>
      <td>continuous-delivery</td>
      <td>Ryan Cook</td>
      <td>3812500</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3421</th>
      <td>277281</td>
      <td>210577</td>
      <td>25437</td>
      <td>2021-10-26 13:38:28</td>
      <td>2021-10-26 16:43:38</td>
      <td>2021-10-26 16:43:38</td>
      <td>SRE</td>
      <td>axel simon</td>
      <td>1172256</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3422</th>
      <td>277284</td>
      <td>210598</td>
      <td>25446</td>
      <td>2021-09-02 16:50:05</td>
      <td>2021-09-02 16:58:16</td>
      <td>2021-09-02 16:58:16</td>
      <td>workshop-apps</td>
      <td>Diego Uchôa Neves</td>
      <td>13623671</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>3423 rows × 10 columns</p>
</div></div></div>
</div>
<p>Now, let’s see the number of PRs created per repository.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prs_repo_gb</span> <span class="o">=</span> <span class="n">pr_repo_cid_cont</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;repo_name&#39;</span><span class="p">)</span>
<span class="n">prs_repo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">prs_repo</span><span class="p">[</span><span class="s1">&#39;internal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prs_repo_gb</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">prs_repo</span><span class="p">[</span><span class="s1">&#39;external&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prs_repo_gb</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prs_repo</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;internal&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="s1">&#39;True&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Number of PRs Created (Grouped by Repository)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Repository&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Count&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_61_0.png" src="../_images/community_metrics_61_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prs_repo_gb</span><span class="o">.</span><span class="n">pull_request_id</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;PRs Opened across Repositories&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_62_0.png" src="../_images/community_metrics_62_0.png" />
</div>
</div>
</section>
<section id="prs-created-by-external-vs-internal-contributors">
<h2>PRs Created By External vs Internal Contributors<a class="headerlink" href="#prs-created-by-external-vs-internal-contributors" title="Permalink to this headline">#</a></h2>
<p>Let’s see the distribution of PRs opened by External and Internal contributors</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_cntrb</span> <span class="o">=</span> <span class="n">pr_repo_cid_cont</span><span class="p">[</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">pr_repo_cid_cont</span><span class="o">.</span><span class="n">cntrb_internal</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;External&quot;</span><span class="p">,</span><span class="s2">&quot;Internal&quot;</span><span class="p">]</span>
<span class="n">pr_cntrb</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;PRs Opened by External vs Internal Contributors&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_65_0.png" src="../_images/community_metrics_65_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">irc</span> <span class="o">=</span> <span class="n">issues_repo_cont</span><span class="p">[[</span><span class="s1">&#39;issue_id&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;issue_id&#39;</span><span class="p">:</span><span class="s1">&#39;Contribution&#39;</span><span class="p">})</span>
<span class="n">prc</span> <span class="o">=</span> <span class="n">pr_repo_cid_cont</span><span class="p">[[</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">,</span> <span class="s1">&#39;cntrb_internal&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pull_request_id&#39;</span><span class="p">:</span><span class="s1">&#39;Contribution&#39;</span><span class="p">})</span>
<span class="n">iprc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">irc</span><span class="p">,</span> <span class="n">prc</span><span class="p">])</span>
<span class="n">iprc_groups</span> <span class="o">=</span> <span class="n">iprc</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;cntrb_internal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)[</span><span class="s1">&#39;Contribution&#39;</span><span class="p">]</span>

<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;External&quot;</span><span class="p">,</span><span class="s2">&quot;Internal&quot;</span><span class="p">]</span>
<span class="n">iprc_groups</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">pctdistance</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Internal vs External Contributions (PRs + issues)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/community_metrics_66_0.png" src="../_images/community_metrics_66_0.png" />
</div>
</div>
<p>This shows that 90.9% of contributions (PRs + issues) are made by internal contributors and 9.1% by external contributors</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="conclusion">
<h1>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h1>
<p>In this notebook, we collected and visualized community metrics for the Operate First group repositories. We connected to the Augur database to fetch data about github contributions such as issues and PRs. The visualizations can be used to understand community engagement of the group.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./metrics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Operate First Authors<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>